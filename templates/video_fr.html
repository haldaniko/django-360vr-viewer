{% load static %}

<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <title>Inner World</title>
  <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">
  <link rel="stylesheet" href="{% static 'css/video360.css' %}">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">

  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
</head>
<body>

<!-- En-tÃªte -->
<header class="header">
  <div class="header__container">
    <div class="header__info">
      <img class="header__erasmus" alt="UE" src="{% static 'img/Erasmus.jpg' %}">
      <img class="header__logo" alt="logo" src="{% static 'img/inner_world_logo.png' %}">
      <h1 class="header__title">Plateforme de RÃ©alitÃ© Virtuelle<br> pour le Soutien Psychosocial</h1>
    </div>
    <nav class="header__lang">
      <ul class="header__lang-list">
        <li class="header__lang-item"><a href="?lang=tr" class="header__lang-link">TR</a></li>
        <li class="header__lang-item"><a href="?lang=en" class="header__lang-link">EN</a></li>
        <li class="header__lang-item"><a href="?lang=fr" class="header__lang-link--active">FR</a></li>
        <li class="header__lang-item"><a href="?lang=ua" class="header__lang-link">UA</a></li>
        <li class="header__lang-item"><a href="?lang=bg" class="header__lang-link">BG</a></li>
      </ul>
    </nav>
  </div>
</header>

<!-- Contenu principal -->
<main>
  <!-- Ã€ propos -->
  <section class="about">
    <h2 class="about__title">Ã€ propos</h2>
    <p class="about__description">
      La RÃ©alitÃ© Virtuelle pour le Soutien Psychosocial est un projet KA210 crÃ©Ã© dans le cadre du programme Erasmus+,
      dÃ©diÃ© Ã  transformer la maniÃ¨re dont le soutien en santÃ© mentale est apportÃ© aux jeunes dÃ©placÃ©s.
      Le projet se concentre sur les jeunes touchÃ©s par la guerre en Ukraine.
      GrÃ¢ce Ã  lâ€™utilisation innovante de la technologie de rÃ©alitÃ© virtuelle (VR),
      le projet vise Ã  construire un environnement sÃ»r, engageant et sans barriÃ¨res pour le soutien psychosocial,
      rÃ©pondant aux besoins variÃ©s des personnes Ã¢gÃ©es de 13 Ã  20 ans.<br><br>

      Pendant 18 mois, notre Ã©quipe internationale composÃ©e de membres de Bulgarie, de France et de Turquie a crÃ©Ã©,
      testÃ© et partagÃ© un outil VR conÃ§u pour amÃ©liorer la qualitÃ© et lâ€™accessibilitÃ© de lâ€™assistance en santÃ© mentale.
      Soixante jeunes dÃ©placÃ©s ont participÃ© Ã  la phase pilote, recevant un soutien personnalisÃ© et de haute qualitÃ© basÃ© sur la VR,
      tandis que six professionnels de santÃ© mentale formÃ©s ont appris Ã  intÃ©grer cet outil dans leur pratique.
      Lâ€™approche dâ€™InnerWorld supprime les barriÃ¨res courantes telles que la langue, le coÃ»t et la gÃ©ographie,
      permettant Ã  davantage de jeunes dâ€™accÃ©der Ã  lâ€™aide quand et oÃ¹ ils en ont besoin.
      Le projet a Ã©galement investi dans un impact Ã  long terme, en veillant Ã  ce que la mÃ©thode VR puisse Ãªtre largement adoptÃ©e
      en Europe et au-delÃ . En combinant lâ€™innovation numÃ©rique, lâ€™expertise en santÃ© mentale et la collaboration internationale,
      InnerWorld promeut lâ€™inclusion, soutient le rÃ©tablissement et donne aux jeunes les moyens de dÃ©velopper
      des compÃ©tences pour lâ€™apprentissage, le travail et la vie communautaire dans leurs nouveaux environnements.
    </p>
  </section>

  <!-- Partenaires -->
  <section class="partners">
    <div class="partners__container">
      <h2 class="partners__title">Organisations partenaires</h2>
      <div class="partners__list">
        <div class="partners__card">
          <a target="_blank" href="https://opendoors.center/">

            <img src="{% static 'img/partner_OpenDoors.jpg' %}" alt="Logo partenaire" class="partners__image"/>
            <h1 class="partners__header">Centre Portes Ouvertes</h1>
            <p class="partners__description">
              Notre mission est dâ€™aider les personnes dÃ©placÃ©es par la guerre en Ukraine Ã  trouver sÃ©curitÃ© et stabilitÃ©
              dans les sociÃ©tÃ©s dâ€™accueil, dâ€™une maniÃ¨re qui favorise leur indÃ©pendance, leur autonomie et leur participation civique active.
            </p>

          </a>
        </div>
        <div class="partners__card">
          <a target="_blank" href="https://ankarabilim.edu.tr/en/index">

            <img src="{% static 'img/partner_AnkaraScienceUniversity.jpg' %}" alt="Logo partenaire" class="partners__image"/>
            <h1 class="partners__header">UniversitÃ© des Sciences dâ€™Ankara</h1>
            <p class="partners__description">
              Lâ€™UniversitÃ© Ankara Bilim est une universitÃ© fondation crÃ©Ã©e le 21 avril 2016 par la Fondation Turque pour lâ€™EfficacitÃ©,
              qui vise Ã  dÃ©velopper la sensibilisation et la culture favorisant le Â« dÃ©veloppement durable Â» au niveau individuel et institutionnel.
            </p>
          </a>
        </div>
        <div class="partners__card">
          <a target="_blank" href="https://www.instagram.com/ukrrcenter/">

            <img src="{% static 'img/partner_CentreDeRessourcesUkrainen.png' %}" alt="Logo partenaire"
                 class="partners__image"/>
            <h1 class="partners__header">Centre de ressources ukrainien</h1>
            <p class="partners__description">
              CrÃ©Ã© en octobre 2022, le CRU a dâ€™abord agi comme un groupe informel, jusquâ€™Ã  obtenir un statut officiel en septembre 2023.
              La mission du CRU est de soutenir les personnes ukrainiennes dÃ©placÃ©es grÃ¢ce Ã  des programmes complets
              et des initiatives communautaires, afin de lever les barriÃ¨res et de faciliter lâ€™adaptation.
            </p>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- VidÃ©o -->
  <section class="video">
    <div class="video__container">

      <!-- Vignettes (centrÃ©es au-dessus du lecteur) -->
      <div class="video__thumbnails">
        <button class="video__thumbnail video__thumbnail--active"
                aria-label="VidÃ©o 1">
          <img src="{% static 'img/cinema.png' %}" alt="VidÃ©o 1">
          <span class="video__label">Cascade</span>
        </button>
        <button class="video__thumbnail" aria-label="VidÃ©o 2">
          <img src="{% static 'img/grounding.png' %}" alt="VidÃ©o 2">
          <span class="video__label">Ancrage</span>
        </button>
        <button class="video__thumbnail" aria-label="VidÃ©o 3">
          <img src="{% static 'img/scan.png' %}" alt="VidÃ©o 3">
          <span class="video__label">CinÃ©ma</span>
        </button>
        <button class="video__thumbnail" aria-label="VidÃ©o 4">
          <img src="{% static 'img/triangle.png' %}" alt="VidÃ©o 4">
          <span class="video__label">Balayage</span>
        </button>
        <button class="video__thumbnail" aria-label="VidÃ©o 5">
          <img src="{% static 'img/waterfall.png' %}" alt="VidÃ©o 5">
          <span class="video__label">Respiration Triangle</span>
        </button>
      </div>


      <!-- Lecteur -->
      <div class="video__player-wrapper">
        <video
            id="video360"
            class="video__element"
            playsinline
            crossorigin="anonymous"
            webkit-playsinline
            muted
        ></video>

        <a-scene vr-mode-ui="enabled: true" embedded class="video__scene">
          <a-videosphere
              id="videosphere"
              src="#video360"
              rotation="0 -90 0"
              visible="false"
          ></a-videosphere>
          <a-camera
              look-controls="pointerLockEnabled: true"
              wasd-controls-enabled="false"
          ></a-camera>
        </a-scene>

        <div class="video__play-button" id="playButton" aria-label="Lecture"></div>
      </div>
    </div>
  </section>

  <!-- Pied de page -->
  <footer class="footer">
    <div class="footer__container">
      <div class="footer__column">
        <h3 class="footer__title">Contacts FSCOD</h3>
        <p class="footer__text">Email : contact@opendoors.center</p>
        <p class="footer__text">TÃ©lÃ©phone : +359 884 013 786</p>
        <p class="footer__text">Site web :
          <a class="footer__link" target="_blank" href="https://opendoors.center/">
            opendoors.center
          </a>
        </p>
      </div>
      <div class="footer__column">
        <h3 class="footer__title">Contacts ABU</h3>
        <p class="footer__text">Email : info@ankarabilim.edu.tr</p>
        <p class="footer__text">TÃ©lÃ©phone : +90 552 899 84 11</p>
        <p class="footer__text">Site web :
          <a class="footer__link" target="_blank" href="https://ankarabilim.edu.tr/en/index">
            ankarabilim.edu.tr
          </a>
        </p>
      </div>
      <div class="footer__column">
        <h3 class="footer__title">Contacts URC</h3>
        <p class="footer__text">Email : olena.vyshnev@gmail.com</p>
        <p class="footer__text">TÃ©lÃ©phone : +33 065 245 56 39</p>
        <p class="footer__text">Instagram :
          <a class="footer__link" target="_blank" href="https://www.instagram.com/ukrrcenter/">
            @ukrrcenter
          </a>
        </p>
      </div>
      <div class="footer__column">
        <h3 class="footer__title">Guides & Documents</h3>
        <p class="footer__text">
          <a href="{% static 'docs/VR videos guide for direct users.pdf' %}" target="_blank">
            ğŸ“„ Guide for direct users.pdf
          </a>
        </p>
        <p class="footer__text">
          <a href="{% static 'docs/VR videos guide for professionals.pdf' %}" target="_blank">
            ğŸ“„ Guide for professionals.pdf
          </a>
        </p>
        <p class="footer__text">
          <a href="{% static 'docs/Who-5French.pdf' %}" target="_blank">
            ğŸ“„ Who-5French.pdf
          </a>
        </p>
      </div>
      <div class="footer__column">
        <h3 class="footer__title">RÃ¨glements</h3>
        <p class="footer__text">
          <a href="{% static 'docs/Privacy Policy.pdf' %}" target="_blank">
            ğŸ“„ Privacy Policy.pdf
          </a>
        </p>
        <p class="footer__text">
          <a href="{% static 'docs/Terms of Use.pdf' %}" target="_blank">
            ğŸ“„ Terms of Use.pdf
          </a>
        </p>
        <p class="footer__text">
          <a href="{% static 'docs/Incident Report template.docx' %}" target="_blank">
            ğŸ“„ Incident Report template.docx
          </a>
        </p>
      </div>
    </div>
  </footer>

</main>

<script>
    const video = document.getElementById('video360');
    const playButton = document.getElementById('playButton');
    const videosphere = document.getElementById('videosphere');

    let player = dashjs.MediaPlayer().create();
    player.updateSettings({
        streaming: {
            buffer: {
                stableBufferTime: 3,
                bufferTimeAtTopQuality: 5,
                bufferTimeAtTopQualityLongForm: 8,
                fastSwitchEnabled: true
            }
        }
    });

    let currentUrl = "{{ cinema_dash_manifest_url }}";
    player.initialize(video, currentUrl, false);

    player.on(dashjs.MediaPlayer.events.ERROR, (e) => {
        console.error('Erreur Dash.js :', e);
        if (e.error && e.error.code === 'QuotaExceededError') {
            player.reset();
            player.initialize(video, currentUrl, false);
            video.pause();
            if (videosphere) videosphere.setAttribute('visible', 'false');
            playButton.style.display = '';
        }
    });

    video.addEventListener('loadeddata', () => {
        if (videosphere) videosphere.setAttribute('visible', 'true');
    });

    playButton.addEventListener('click', () => {
        player.play();
        video.muted = false;
        video.play().catch(e => console.error('La lecture vidÃ©o a Ã©chouÃ© :', e));
        playButton.style.display = 'none';
    });

    const urlMap = {
        0: "{{ cinema_dash_manifest_url }}",
        1: "{{ grounding_dash_manifest_url }}",
        2: "{{ scan_dash_manifest_url }}",
        3: "{{ triangle_dash_manifest_url }}",
        4: "{{ waterfall_dash_manifest_url }}"
    };

    const thumbnails = document.querySelectorAll('.video__thumbnail');
    thumbnails.forEach((thumb, index) => {
        thumb.addEventListener('click', () => {
            thumbnails.forEach(t => t.classList.remove('video__thumbnail--active'));
            thumb.classList.add('video__thumbnail--active');

            const url = urlMap[index];
            currentUrl = url;

            player.reset();
            player.initialize(video, url, false);
            video.muted = false;

            if (videosphere) videosphere.setAttribute('visible', 'true');

            playButton.style.display = '';
        });
    });
</script>

</body>
</html>
