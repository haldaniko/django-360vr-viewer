{% load static %}

<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inner World</title>
  <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">
  <link rel="stylesheet" href="{% static 'css/video360.css' %}">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">

  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
</head>
<body>

<!-- Header -->
<header class="header">
  <div class="header__container">
    <a href="{% url 'website:about' %}?lang=ua">
      <div class="header__info">
        <img class="header__erasmus" alt="EU" src="{% static 'img/Erasmus.jpg' %}">
        <img class="header__logo" alt="logo" src="{% static 'img/inner_world_logo.png' %}">
        <h1 class="header__title">–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ—ó —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—ñ<br> –¥–ª—è –ø—Å–∏—Ö–æ—Å–æ—Ü—ñ–∞–ª—å–Ω–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏</h1>
      </div>
    </a>
    <nav class="header__lang">
      <ul class="header__lang-list">
        <li class="header__lang-item"><a href="?lang=tr" class="header__lang-link">TR</a></li>
        <li class="header__lang-item"><a href="?lang=en" class="header__lang-link">EN</a></li>
        <li class="header__lang-item"><a href="?lang=fr" class="header__lang-link">FR</a></li>
        <li class="header__lang-item"><a href="?lang=ua" class="header__lang-link--active">UA</a></li>
        <li class="header__lang-item"><a href="?lang=bg" class="header__lang-link">BG</a></li>
      </ul>
    </nav>
  </div>
</header>

<!-- Main Content -->
<main>

  <!-- Instructions -->
  <section class="about">
    <h2 class="about__title">VRPS –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó</h2>
    <div class="about__description">
      <p>–ü—Ä–æ–µ–∫—Ç InnerWorld —Ä–æ–∑—Ä–æ–±–∏–≤ –¥–æ—Å—Ç—É–ø–Ω—ñ, –∑—Ä—É—á–Ω—ñ –¥–ª—è –º–æ–ª–æ–¥—ñ –º–µ—Ç–æ–¥–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –ø—Å–∏—Ö—ñ—á–Ω–æ–≥–æ –∑–¥–æ—Ä–æ–≤'—è. –¶—ñ –ø'—è—Ç—å –∫–æ—Ä–æ—Ç–∫–∏—Ö
        VR-–≤—ñ–¥–µ–æ ‚Äì —Ü–µ –ø—Ä–æ—Å—Ç—ñ, –∑–∞—Å–Ω–æ–≤–∞–Ω—ñ –Ω–∞ –Ω–∞–≤–∏—á–∫–∞—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, —è–∫—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏
        —Å–≤–æ–≥–æ –ø—Å–∏—Ö—ñ—á–Ω–æ–≥–æ –∑–¥–æ—Ä–æ–≤'—è. –í–æ–Ω–∏ –Ω–µ —î —Ç–µ—Ä–∞–ø—ñ—î—é —á–∏ –∫–ª—ñ–Ω—ñ—á–Ω–∏–º –ª—ñ–∫—É–≤–∞–Ω–Ω—è–º. –Ø–∫—â–æ –≤–∏ –ø–µ—Ä–µ–±—É–≤–∞—î—Ç–µ –≤ –∫—Ä–∏–∑–æ–≤—ñ–π —Å–∏—Ç—É–∞—Ü—ñ—ó,
        –≤–≤–∞–∂–∞—î—Ç–µ, —â–æ –º–æ–∂–µ—Ç–µ –∑–∞–≤–¥–∞—Ç–∏ —à–∫–æ–¥–∏ —Å–æ–±—ñ —á–∏ –∫–æ–º—É—Å—å —ñ–Ω—à–æ–º—É, –∞–±–æ –≤–∞—à—ñ —Å–∏–º–ø—Ç–æ–º–∏ –ø–æ–≥—ñ—Ä—à—É—é—Ç—å—Å—è, –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –º—ñ—Å—Ü–µ–≤–∏—Ö
        —Å–ª—É–∂–± –µ–∫—Å—Ç—Ä–µ–Ω–æ—ó –¥–æ–ø–æ–º–æ–≥–∏ –∞–±–æ –∫–≤–∞–ª—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–æ–≥–æ —Ñ–∞—Ö—ñ–≤—Ü—è –∑ –ø—Å–∏—Ö—ñ—á–Ω–æ–≥–æ –∑–¥–æ—Ä–æ–≤'—è.<br><br>

        –í–∏–±–µ—Ä—ñ—Ç—å –±–µ–∑–ø–µ—á–Ω–µ, –∑—Ä—É—á–Ω–µ –º—ñ—Å—Ü–µ, –¥–µ –≤–∏ –º–æ–∂–µ—Ç–µ —Å—ñ—Å—Ç–∏ –∞–±–æ –ª—è–≥—Ç–∏. –Ø–∫—â–æ –≤–∏ –≤—ñ–¥—á—É–≤–∞—î—Ç–µ –∑–∞–ø–∞–º–æ—Ä–æ—á–µ–Ω–Ω—è, –Ω—É–¥–æ—Ç—É,
        –æ–Ω—ñ–º—ñ–Ω–Ω—è –∞–±–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –≤ –±—É–¥—å-—è–∫–∏–π –º–æ–º–µ–Ω—Ç, –∑—É–ø–∏–Ω—ñ—Ç—å –≤—ñ–¥–µ–æ, –≤—ñ–¥–∫—Ä–∏–π—Ç–µ –æ—á—ñ, –æ–∑–∏—Ä–Ω—ñ—Ç—å—Å—è –ø–æ –∫—ñ–º–Ω–∞—Ç—ñ —Ç–∞ –ø–µ—Ä–µ–π–¥—ñ—Ç—å
        –¥–æ –≤–ø—Ä–∞–≤–∏ –Ω–∞ –∑–∞–∑–µ–º–ª–µ–Ω–Ω—è –Ω–∏–∂—á–µ. –Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –Ω–∞–≤—É—à–Ω–∏–∫–∏ –∞–±–æ VR-–≥–∞—Ä–Ω—ñ—Ç—É—Ä—É, –Ω–µ–≥–∞–π–Ω–æ –∑–Ω—ñ–º—ñ—Ç—å —ó—Ö, —è–∫—â–æ –≤–∏
        –ø–æ—á—É–≤–∞—î—Ç–µ—Å—è –ø–æ–≥–∞–Ω–æ. –Ø–∫—â–æ —É –≤–∞—Å —î –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω–Ω—è –¥–∏—Ö–∞–ª—å–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ –∞–±–æ —Å–µ—Ä—Ü—è, –≤–∏ –≤–∞–≥—ñ—Ç–Ω—ñ, –∞–±–æ –≤–∞–º –Ω–µ–∑—Ä—É—á–Ω–æ
        –∑–∞—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –¥–∏—Ö–∞–Ω–Ω—è, —Å–∫–æ—Ä–æ—Ç—ñ—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–∞–ª—å—Ü—ñ–≤ –∞–±–æ –ø—Ä–æ–ø—É—Å—Ç—ñ—Ç—å –∫—Ä–æ–∫–∏ –∑–∞—Ç—Ä–∏–º–∫–∏ –¥–∏—Ö–∞–Ω–Ω—è.
      </p>

      <div class="about__cards">
        <a href="{% static 'docs/VR videos guide for direct users.pdf' %}" target="_blank">
          <div class="about__card">
            üìÑ Guide for direct users.pdf
          </div>
        </a>

        <a href="{% static 'docs/VR videos guide for professionals.pdf' %}" target="_blank">
          <div class="about__card">
            üìÑ Guide for professionals.pdf
          </div>
        </a>

      </div>
    </div>
  </section>

  <!-- Video -->
  <section class="video">
    <div class="video__container">

      <!-- Thumbnails (centered above the player) -->
      <div class="video__thumbnails">
        <button class="video__thumbnail video__thumbnail--active"
                aria-label="Video 1">
          <img src="{% static 'img/cinema.png' %}" alt="Video 1">
          <span class="video__label">Waterfall</span>
        </button>
        <button class="video__thumbnail" aria-label="Video 2">
          <img src="{% static 'img/grounding.png' %}" alt="Video 2">
          <span class="video__label">Grounding</span>
        </button>
        <button class="video__thumbnail" aria-label="Video 3">
          <img src="{% static 'img/scan.png' %}" alt="Video 3">
          <span class="video__label">Cinema</span>
        </button>
        <button class="video__thumbnail" aria-label="Video 4">
          <img src="{% static 'img/triangle.png' %}" alt="Video 4">
          <span class="video__label">Scanning</span>
        </button>
        <button class="video__thumbnail" aria-label="Video 5">
          <img src="{% static 'img/waterfall.png' %}" alt="Video 5">
          <span class="video__label">Triangle Breath</span>
        </button>
      </div>


      <!-- Player -->
      <div class="video__player-wrapper">
        <video
            id="video360"
            class="video__element"
            playsinline
            crossorigin="anonymous"
            webkit-playsinline
            muted
        ></video>

        <a-scene vr-mode-ui="enabled: true" embedded class="video__scene">
          <a-videosphere
              id="videosphere"
              src="#video360"
              rotation="0 -90 0"
              visible="false"
          ></a-videosphere>
          <a-camera
              look-controls="pointerLockEnabled: true"
              wasd-controls-enabled="false"
          ></a-camera>
        </a-scene>

        <div class="video__play-button" id="playButton" aria-label="Play"></div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer__container">
      <div class="footer__column">
        <h3 class="footer__title">FSCOD –∫–æ–Ω—Ç–∞–∫—Ç–∏</h3>
        <p class="footer__text">Email: contact@opendoors.center</p>
        <p class="footer__text">–¢–µ–ª–µ—Ñ–æ–Ω: +359 884 013 786</p>
        <p class="footer__text">–í–µ–±—Å–∞–π—Ç:
          <a class="footer__link" target="_blank" href="https://opendoors.center/">
            opendoors.center
          </a>
        </p>

      </div>
      <div class="footer__column">
        <h3 class="footer__title">ABU –∫–æ–Ω—Ç–∞–∫—Ç–∏</h3>
        <p class="footer__text">Email: info@ankarabilim.edu.tr</p>
        <p class="footer__text">–¢–µ–ª–µ—Ñ–æ–Ω: +90 552 899 84 11</p>
        <p class="footer__text">–í–µ–±—Å–∞–π—Ç:
          <a class="footer__link" target="_blank" href="https://ankarabilim.edu.tr/en/index">
            ankarabilim.edu.tr
          </a>
        </p>

      </div>
      <div class="footer__column">
        <h3 class="footer__title">URC –∫–æ–Ω—Ç–∞–∫—Ç–∏</h3>
        <p class="footer__text">Email: olena.vyshnev@gmail.com</p>
        <p class="footer__text">–¢–µ–ª–µ—Ñ–æ–Ω: +33 065 245 56 39</p>
        <p class="footer__text">–Ü–Ω—Å—Ç–∞–≥—Ä–∞–º:
          <a class="footer__link" target="_blank" href="https://www.instagram.com/ukrrcenter/">
            @ukrrcenter
          </a>
        </p>

      </div>
      <div class="footer__column">
        <h3 class="footer__title">–ü–æ—Å—ñ–±–Ω–∏–∫–∏ & –î–æ–∫—É–º–µ–Ω—Ç–∏</h3>
        <p class="footer__text">
          <a href="{% static 'docs/VR videos guide for direct users.pdf' %}" target="_blank">
            üìÑ Guide for direct users.pdf
          </a>
        </p>
        <p class="footer__text">
          <a href="{% static 'docs/VR videos guide for professionals.pdf' %}" target="_blank">
            üìÑ Guide for professionals.pdf
          </a>
        </p>
        <p class="footer__text">
          <a href="{% static 'docs/Who-5Ukrainian.pdf' %}" target="_blank">
            üìÑ Who-5Ukrainian.pdf
          </a>
        </p>
      </div>
      <div class="footer__column">
        <h3 class="footer__title">–†–µ–≥—É–ª—è—Ü—ñ—ó</h3>
        <p class="footer__text">
          <a href="{% static 'docs/Privacy Policy.pdf' %}" target="_blank">
            üìÑ Privacy Policy.pdf
          </a>
        </p>
        <p class="footer__text">
          <a href="{% static 'docs/Terms of Use.pdf' %}" target="_blank">
            üìÑ Terms of Use.pdf
          </a>
        </p>
        <p class="footer__text">
          <a href="{% static 'docs/Incident Report template.docx' %}" target="_blank">
            üìÑ Incident Report template.docx
          </a>
        </p>
      </div>
    </div>
    <div class="footer__bottom">
      <hr class="footer__divider">
      <p class="footer__copy">
        InnerWorld: Virtual Reality for Psychosocial Support<br>
        2023-3-TR01-KA210-YOU-000181712<br>
        ¬© 2025 –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.
      </p>
    </div>
  </footer>
</main>

<script>
    const video = document.getElementById('video360');
    const playButton = document.getElementById('playButton');
    const videosphere = document.getElementById('videosphere');

    let player = dashjs.MediaPlayer().create();
    player.updateSettings({
        streaming: {
            buffer: {
                stableBufferTime: 3,
                bufferTimeAtTopQuality: 5,
                bufferTimeAtTopQualityLongForm: 8,
                fastSwitchEnabled: true
            }
        }
    });

    let currentUrl = "{{ cinema_dash_manifest_url }}";
    player.initialize(video, currentUrl, false);

    player.on(dashjs.MediaPlayer.events.ERROR, (e) => {
        console.error('Dash.js –ø–æ–º–∏–ª–∫–∞:', e);
        if (e.error && e.error.code === 'QuotaExceededError') {
            player.reset();
            player.initialize(video, currentUrl, false);
            video.pause();
            if (videosphere) videosphere.setAttribute('visible', 'false');
            playButton.style.display = '';
        }
    });

    video.addEventListener('loadeddata', () => {
        if (videosphere) videosphere.setAttribute('visible', 'true');
    });

    playButton.addEventListener('click', () => {
        player.play();
        video.muted = false;
        video.play().catch(e => console.error('–ù–µ –≤–¥–∞–ª–æ—Å—è –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –≤—ñ–¥–µ–æ:', e));
        playButton.style.display = 'none';
    });

    const urlMap = {
        0: "{{ cinema_dash_manifest_url }}",
        1: "{{ grounding_dash_manifest_url }}",
        2: "{{ scan_dash_manifest_url }}",
        3: "{{ triangle_dash_manifest_url }}",
        4: "{{ waterfall_dash_manifest_url }}"
    };

    const thumbnails = document.querySelectorAll('.video__thumbnail');
    thumbnails.forEach((thumb, index) => {
        thumb.addEventListener('click', () => {
            thumbnails.forEach(t => t.classList.remove('video__thumbnail--active'));
            thumb.classList.add('video__thumbnail--active');

            const url = urlMap[index];
            currentUrl = url;

            player.reset();
            player.initialize(video, url, false);

            video.muted = true;
            video.pause();
            if (videosphere) videosphere.setAttribute('visible', 'false');
            playButton.style.display = '';
        });
    });
</script>

</body>
</html>
