{% load static %}

<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inner World</title>
  <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">
  <link rel="stylesheet" href="{% static 'css/video360.css' %}">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">

  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
</head>
<body>

<!-- Header -->
<header class="header">
  <div class="header__container">
    <a href="{% url 'website:about' %}?lang=bg">
      <div class="header__info">
        <img class="header__logo" alt="logo" src="{% static 'img/logo-bg2.png' %}">
        <img class="header__tua-logo" alt="tua-logo" src="{% static 'img/tua-logo.png' %}">
        <img class="header__yazisiz-logo" alt="yazisiz-logo" src="{% static 'img/yazisiz-logo.jpg' %}">
        <img class="header__erasmus" alt="eu-log" src="{% static 'img/eu-logo-bg.jpg' %}">
      </div>
    </a>
    <nav class="header__lang">
      <ul class="header__lang-list">
        <li class="header__lang-item"><a href="?lang=en" class="header__lang-link">EN</a></li>
        <li class="header__lang-item"><a href="?lang=tr" class="header__lang-link">TR</a></li>
        <li class="header__lang-item"><a href="?lang=fr" class="header__lang-link">FR</a></li>
        <li class="header__lang-item"><a href="?lang=ua" class="header__lang-link">UA</a></li>
        <li class="header__lang-item"><a href="?lang=bg" class="header__lang-link--active">BG</a></li>
      </ul>
    </nav>
  </div>
</header>

<!-- Main Content -->
<main>

  <!-- Instructions -->
  <section class="about">
    <h2 class="about__title">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ VRPS</h2>
    <div class="about__description">
      <p>–ü—Ä–æ–µ–∫—Ç—ä—Ç InnerWorld —Ä–∞–∑—Ä–∞–±–æ—Ç–∏ –¥–æ—Å—Ç—ä–ø–Ω–∏, –ø–æ–¥—Ö–æ–¥—è—â–∏ –∑–∞ –º–ª–∞–¥–µ–∂–∏ –º–µ—Ç–æ–¥–∏ –∑–∞ –ø–æ–¥–∫—Ä–µ–ø–∞ –Ω–∞ –ø—Å–∏—Ö–∏—á–Ω–æ—Ç–æ –∑–¥—Ä–∞–≤–µ. –¢–µ–∑–∏ –ø–µ—Ç
        –∫—Ä–∞—Ç–∫–∏ VR –≤–∏–¥–µ–æ–∫–ª–∏–ø–∞ —Å–∞ –ø—Ä–æ—Å—Ç–∏, –±–∞–∑–∏—Ä–∞–Ω–∏ –Ω–∞ —É–º–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, –∫–æ–∏—Ç–æ –º–æ–∂–µ—Ç–µ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª–Ω–æ, –∑–∞ –¥–∞
        –ø–æ–¥–∫—Ä–µ–ø–∏—Ç–µ –ø—Å–∏—Ö–∏—á–Ω–æ—Ç–æ —Å–∏ –∑–¥—Ä–∞–≤–µ. –¢–µ –Ω–µ —Å–∞ —Ç–µ—Ä–∞–ø–∏—è –∏–ª–∏ –∫–ª–∏–Ω–∏—á–Ω–æ –ª–µ—á–µ–Ω–∏–µ. –ê–∫–æ —Å—Ç–µ –≤ –∫—Ä–∏–∑–∞, —Å–º—è—Ç–∞—Ç–µ, —á–µ –º–æ–∂–µ –¥–∞
        –Ω–∞–≤—Ä–µ–¥–∏—Ç–µ –Ω–∞ —Å–µ–±–µ —Å–∏ –∏–ª–∏ –Ω–∞ –Ω—è–∫–æ–π –¥—Ä—É–≥, –∏–ª–∏ —Å–∏–º–ø—Ç–æ–º–∏—Ç–µ –≤–∏ —Å–µ –≤–ª–æ—à–∞—Ç, —Å–≤—ä—Ä–∂–µ—Ç–µ —Å–µ —Å –º–µ—Å—Ç–Ω–∏—Ç–µ —Å–ª—É–∂–±–∏ –∑–∞ —Å–ø–µ—à–Ω–∞
        –ø–æ–º–æ—â –∏–ª–∏ —Å –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–∞–Ω —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –ø—Å–∏—Ö–∏—á–Ω–æ –∑–¥—Ä–∞–≤–µ.<br><br>

        –ò–∑–±–µ—Ä–µ—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ —É–¥–æ–±–Ω–æ –º—è—Å—Ç–æ, –∫—ä–¥–µ—Ç–æ –º–æ–∂–µ—Ç–µ –¥–∞ —Å–µ–¥–Ω–µ—Ç–µ –∏–ª–∏ –ª–µ–≥–Ω–µ—Ç–µ. –ê–∫–æ –ø–æ—á—É–≤—Å—Ç–≤–∞—Ç–µ –∑–∞–º–∞—è–Ω–æ—Å—Ç, –≥–∞–¥–µ–Ω–µ,
        –∏–∑—Ç—Ä—ä–ø–≤–∞–Ω–µ –∏–ª–∏ –æ—Ç–∫—ä—Å–Ω–∞—Ç–æ—Å—Ç –≤ –∫–æ–π—Ç–æ –∏ –¥–∞ –µ –º–æ–º–µ–Ω—Ç, —Å–ø—Ä–µ—Ç–µ –≤–∏–¥–µ–æ—Ç–æ, –æ—Ç–≤–æ—Ä–µ—Ç–µ –æ—á–∏, –æ–≥–ª–µ–¥–∞–π—Ç–µ —Å–µ –≤ —Å—Ç–∞—è—Ç–∞ –∏
        –ø—Ä–µ–º–∏–Ω–µ—Ç–µ –∫—ä–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ—Ç–æ –∑–∞ –∑–∞–∑–µ–º—è–≤–∞–Ω–µ –ø–æ-–¥–æ–ª—É. –ê–∫–æ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ —Å–ª—É—à–∞–ª–∫–∏ –∏–ª–∏ VR –æ—á–∏–ª–∞, —Å–≤–∞–ª–µ—Ç–µ –≥–∏ –Ω–µ–∑–∞–±–∞–≤–Ω–æ,
        –∞–∫–æ —Å–µ —á—É–≤—Å—Ç–≤–∞—Ç–µ –∑–ª–µ. –ê–∫–æ –∏–º–∞—Ç–µ –¥–∏—Ö–∞—Ç–µ–ª–Ω–æ –∏–ª–∏ —Å—ä—Ä–¥–µ—á–Ω–æ –∑–∞–±–æ–ª—è–≤–∞–Ω–µ, –±—Ä–µ–º–µ–Ω–Ω–∞ —Å—Ç–µ –∏–ª–∏ –≤–∏ –µ –Ω–µ—É–¥–æ–±–Ω–æ –¥–∞ –∑–∞–¥—ä—Ä–∂–∞—Ç–µ
        –¥—ä—Ö–∞ —Å–∏, –Ω–∞–º–∞–ª–µ—Ç–µ –±—Ä–æ—è –Ω–∞ —Å—Ç—ä–ø–∫–∏—Ç–µ –∏–ª–∏ –ø—Ä–æ–ø—É—Å–Ω–µ—Ç–µ —Å—Ç—ä–ø–∫–∏—Ç–µ –∑–∞ –∑–∞–¥—ä—Ä–∂–∞–Ω–µ –Ω–∞ –¥—ä—Ö–∞.
      </p>

      <div class="about__cards">
        <a href="{% static 'docs/VR videos guide for direct users.pdf' %}" target="_blank">
          <div class="about__card">
            üìÑ Guide for direct users.pdf
          </div>
        </a>

        <a href="{% static 'docs/VR videos guide for professionals.pdf' %}" target="_blank">
          <div class="about__card">
            üìÑ Guide for professionals.pdf
          </div>
        </a>

      </div>
    </div>
  </section>

  <!-- Video -->
  <section class="video">
    <div class="video__container">

      <!-- Thumbnails (centered above the player) -->
      <div class="video__thumbnails">
        <button class="video__thumbnail video__thumbnail--active"
                aria-label="Video 1">
          <img src="{% static 'img/cinema.png' %}" alt="Video 1">
          <span class="video__label">Waterfall</span>
        </button>
        <button class="video__thumbnail" aria-label="Video 2">
          <img src="{% static 'img/grounding.png' %}" alt="Video 2">
          <span class="video__label">Grounding</span>
        </button>
        <button class="video__thumbnail" aria-label="Video 3">
          <img src="{% static 'img/scan.png' %}" alt="Video 3">
          <span class="video__label">Cinema</span>
        </button>
        <button class="video__thumbnail" aria-label="Video 4">
          <img src="{% static 'img/triangle.png' %}" alt="Video 4">
          <span class="video__label">Scanning</span>
        </button>
        <button class="video__thumbnail" aria-label="Video 5">
          <img src="{% static 'img/waterfall.png' %}" alt="Video 5">
          <span class="video__label">Triangle Breath</span>
        </button>
      </div>


      <!-- Player -->
      <div class="video__player-wrapper">
        <video
            id="video360"
            class="video__element"
            playsinline
            crossorigin="anonymous"
            webkit-playsinline
            muted
        ></video>

        <a-scene vr-mode-ui="enabled: true" embedded class="video__scene">
          <a-videosphere
              id="videosphere"
              src="#video360"
              rotation="0 -90 0"
              visible="false"
          ></a-videosphere>
          <a-camera
              look-controls="pointerLockEnabled: true"
              wasd-controls-enabled="false"
          ></a-camera>
        </a-scene>

        <div class="video__play-button" id="playButton" aria-label="Play"></div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer__container">
      <div class="footer__column">
        <h3 class="footer__title">–ö–æ–Ω—Ç–∞–∫—Ç–∏ ABU</h3>
        <p class="footer__text">–ò–º–µ–π–ª: info@ankarabilim.edu.tr</p>
        <p class="footer__text">–¢–µ–ª–µ—Ñ–æ–Ω: +90 552 899 84 11</p>
        <p class="footer__text">–£–µ–±—Å–∞–π—Ç:
          <a class="footer__link" target="_blank" href="https://ankarabilim.edu.tr/en/index">
            ankarabilim.edu.tr
          </a>
        </p>
      </div>
      <div class="footer__column" >
        <h3 class="footer__title">–ö–æ–Ω—Ç–∞–∫—Ç–∏ FSCOD</h3>
        <p class="footer__text">–ò–º–µ–π–ª: contact@opendoors.center</p>
        <p class="footer__text">–¢–µ–ª–µ—Ñ–æ–Ω: +359 884 013 786</p>
        <p class="footer__text">–£–µ–±—Å–∞–π—Ç:
          <a class="footer__link" target="_blank" href="https://opendoors.center/">
            opendoors.center
          </a>
        </p>
      </div>
      <div class="footer__column">
        <h3 class="footer__title">–ö–æ–Ω—Ç–∞–∫—Ç–∏ URC</h3>
        <p class="footer__text">–ò–º–µ–π–ª: olena.vyshnev@gmail.com</p>
        <p class="footer__text">–¢–µ–ª–µ—Ñ–æ–Ω: +33 065 245 56 39</p>
        <p class="footer__text">Instagram:
          <a class="footer__link" target="_blank" href="https://www.instagram.com/ukrrcenter/">
            @ukrrcenter
          </a>
        </p>
      </div>
      <div class="footer__column">
        <h3 class="footer__title">–†—ä–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏</h3>
        <p class="footer__text">
          <a href="{% static 'docs/VR videos guide for direct users.pdf' %}" target="_blank">
            üìÑ Guide for direct users.pdf
          </a>
        </p>
        <p class="footer__text">
          <a href="{% static 'docs/VR videos guide for professionals.pdf' %}" target="_blank">
            üìÑ Guide for professionals.pdf
          </a>
        </p>
        <p class="footer__text">
          <a href="{% static 'docs/Who-5Bulgarian.pdf' %}" target="_blank">
            üìÑ Who-5Bulgarian.pdf
          </a>
        </p>
      </div>
      <div class="footer__column">
        <h3 class="footer__title">–ü—Ä–∞–≤–∏–ª–∞ –∏ —É—Å–ª–æ–≤–∏—è</h3>
        <p class="footer__text">
          <a href="{% static 'docs/Privacy Policy.pdf' %}" target="_blank">
            üìÑ Privacy Policy.pdf
          </a>
        </p>
        <p class="footer__text">
          <a href="{% static 'docs/Terms of Use.pdf' %}" target="_blank">
            üìÑ Terms of Use.pdf
          </a>
        </p>
        <p class="footer__text">
          <a href="{% static 'docs/Incident Report template.docx' %}" target="_blank">
            üìÑ Incident Report template.docx
          </a>
        </p>
      </div>
    </div>
    <div class="footer__bottom">
      <hr class="footer__divider">
      <p class="footer__copy">
        InnerWorld: Virtual Reality for Psychosocial Support
      <p>–§–∏–Ω–∞–Ω—Å–∏—Ä–∞–Ω–æ –æ—Ç –ï–≤—Ä–æ–ø–µ–π—Å–∫–∏—è —Å—ä—é–∑. –ò–∑—Ä–∞–∑–µ–Ω–∏—Ç–µ –≤—ä–∑–≥–ª–µ–¥–∏ –∏ –º–Ω–µ–Ω–∏—è –æ–±–∞—á–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –∏–∑—Ü—è–ª–æ –Ω–∞ —Ç–µ—Ö–Ω–∏—è(–∏—Ç–µ) –∞–≤—Ç–æ—Ä(–∏)
        <br>–∏ –Ω–µ –æ—Ç—Ä–∞–∑—è–≤–∞—Ç –Ω–µ–ø—Ä–µ–º–µ–Ω–Ω–æ –≤—ä–∑–≥–ª–µ–¥–∏—Ç–µ –∏ –º–Ω–µ–Ω–∏—è—Ç–∞ –Ω–∞ –ï–≤—Ä–æ–ø–µ–π—Å–∫–∏—è —Å—ä—é–∑ –∏–ª–∏ –Ω–∞ –ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—Ç–∞ –∏–∑–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∞–≥–µ–Ω—Ü–∏—è
        –∑–∞
        –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ –∫—É–ª—Ç—É—Ä–∞ (EACEA).<br>–ó–∞ —Ç—è—Ö –Ω–µ –Ω–æ—Å–∏ –æ—Ç–≥–æ–≤–æ—Ä–Ω–æ—Å—Ç –Ω–∏—Ç–æ –ï–≤—Ä–æ–ø–µ–π—Å–∫–∏—è—Ç —Å—ä—é–∑, –Ω–∏—Ç–æ EACEA.</p>
      2023-3-TR01-KA210-YOU-000181712<br>
      ¬© 2025 –í—Å–∏—á–∫–∏ –ø—Ä–∞–≤–∞ –∑–∞–ø–∞–∑–µ–Ω–∏.
      </p>
    </div>
  </footer>

</main>

<script>
    const video = document.getElementById('video360');
    const playButton = document.getElementById('playButton');
    const videosphere = document.getElementById('videosphere');
    const camera = document.querySelector('a-camera');

    let player = dashjs.MediaPlayer().create();
    player.updateSettings({
        streaming: {
            buffer: {
                stableBufferTime: 3,
                bufferTimeAtTopQuality: 5,
                bufferTimeAtTopQualityLongForm: 8,
                fastSwitchEnabled: true
            }
        }
    });

    let currentUrl = "{{ cinema_dash_manifest_url }}";
    player.initialize(video, currentUrl, false);

    player.on(dashjs.MediaPlayer.events.ERROR, (e) => {
        console.error('Dash.js error:', e);
        if (e.error && e.error.code === 'QuotaExceededError') {
            player.reset();
            player.initialize(video, currentUrl, false);
            video.pause();
            if (videosphere) videosphere.setAttribute('visible', 'false');
            playButton.style.display = '';
        }
    });

    video.addEventListener('loadeddata', () => {
        if (videosphere) videosphere.setAttribute('visible', 'true');
    });

    playButton.addEventListener('click', () => {
        startVideo();
    });

    document.addEventListener('keydown', (e) => {
        if (e.code === 'Space') {
            e.preventDefault();
            toggleVideo();
        }
    });

    if (videosphere) {
        videosphere.addEventListener('click', () => {
            if (video.paused) {
                startVideo(false);
            }
        });
    }

    function startVideo() {
        player.play();
        video.muted = false;
        video.play().catch(e => console.error('Video play failed:', e));
        playButton.style.display = 'none';
    }

    function pauseVideo() {
        video.pause();
        playButton.style.display = '';
    }

    function toggleVideo() {
        if (video.paused) {
            startVideo();
        } else {
            pauseVideo();
        }
    }

    const urlMap = {
        0: "{{ cinema_dash_manifest_url }}",
        1: "{{ grounding_dash_manifest_url }}",
        2: "{{ scan_dash_manifest_url }}",
        3: "{{ triangle_dash_manifest_url }}",
        4: "{{ waterfall_dash_manifest_url }}"
    };

    const thumbnails = document.querySelectorAll('.video__thumbnail');
    thumbnails.forEach((thumb, index) => {
        thumb.addEventListener('click', () => {
            thumbnails.forEach(t => t.classList.remove('video__thumbnail--active'));
            thumb.classList.add('video__thumbnail--active');

            const url = urlMap[index];
            currentUrl = url;

            player.reset();
            player.initialize(video, url, false);
            video.muted = false;

            if (videosphere) videosphere.setAttribute('visible', 'true');

            playButton.style.display = '';
        });
    });

    if (camera) {
        const controls = camera.components['look-controls'];
        if (controls) {
            controls.pointerLockEnabled = false;
            controls.mouseEnabled = true;
        }
    }
</script>


</body>
</html>